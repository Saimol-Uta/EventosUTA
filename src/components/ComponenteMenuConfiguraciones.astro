---
const { userName, userImage } = Astro.props;
---

<div class="relative inline-block text-left">
  <details class="group">
    <summary class="flex items-center gap-3 px-4 py-2 bg-white border border-gray-300 rounded-lg shadow cursor-pointer hover:bg-gray-50 transition">
      <img src={userImage} alt="Usuario" class="w-10 h-10 rounded-full object-cover" />

      <span class="text-gray-800 font-medium">{userName}</span>

      <svg class="w-5 h-5 text-gray-600 group-open:rotate-90 transition-transform" fill="none" stroke="currentColor" stroke-width="2"
        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </summary>

    <div class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50">
      <a href="/perfil" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Ver perfil</a>
      <a href="/eventos" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Ver eventos</a>
      <a href="/" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-100" id="logout">Cerrar sesión</a>
    </div>
  </details>
</div>
<script>
const logoutElem = document.querySelector("#logout") as HTMLAnchorElement;
    logoutElem?.addEventListener("click", async (e) => {
        e.preventDefault();

        alert("Se cerró la sesión");
        console.log("Se cerró la sesión");
    });
</script>