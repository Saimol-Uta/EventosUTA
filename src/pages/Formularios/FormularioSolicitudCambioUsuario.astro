---
import "../../styles/FormularioSolicitudCambioUsuario.css";
import Layout from "../../layouts/Layout.astro";
import { createCambio } from "../../actions/Cambios/setCambios";
---

<Layout>
  <script>
    function handleDragOver(event: DragEvent) {
      event.preventDefault();
      (event.currentTarget as HTMLElement).classList.add("dragover");
    }

    function handleDragLeave(event: DragEvent) {
      (event.currentTarget as HTMLElement).classList.remove("dragover");
    }

    function handleDrop(event: DragEvent) {
      event.preventDefault();
      const fileInput = document.querySelector(
        "input[name='archivo']"
      ) as HTMLInputElement | null;
      if (event.dataTransfer && fileInput) {
        fileInput.files = event.dataTransfer.files;
      }
      (event.currentTarget as HTMLElement).classList.remove("dragover");
    }
  </script>
  <form method="POST" enctype="multipart/form-data" action={createCambio}>
    <!-- Contenedor principal -->
    <div class="container">
      <!-- Título principal del formulario centrado -->
      <div class="header custom-header center-text">SOLICITUD DE CAMBIO</div>

      <!-- Encabezado con datos del solicitante y número -->
      <div class="info-top">
        <div><strong>Carol Cañizares</strong></div>
        <div>21/05/2025</div>
        <div><strong>Nº 1</strong></div>
      </div>

      <!-- Sección para seleccionar el rol del solicitante -->
      <div class="section-title">ROL DEL SOLICITANTE</div>
      <div class="radio-group center">
        <label
          ><input
            type="radio"
            name="rol_sol_cam"
            value="ESTUDIANTE"
          />Estudiante</label
        >
        <label
          ><input
            type="radio"
            name="rol_sol_cam"
            value="DOCENTE"
          />Docente</label
        >
        <label
          ><input type="radio" name="rol_sol_cam" value="GENERAL" />Público
          General</label
        >
      </div>

      <!-- Sección de descripción del cambio solicitado -->
      <div class="section-title">DETALLES DEL CAMBIO</div>
      <label for="des_cam">DESCRIPCIÓN DEL CAMBIO</label>
      <textarea id="des_cam" name="des_cam" rows="3"></textarea>

      <!-- Sección del motivo por el cual se solicita el cambio -->
      <label for="mot_cam">MOTIVO DEL CAMBIO</label>
      <textarea id="mot_cam" name="mot_cam" rows="3"></textarea>

      <!-- Prioridad del cambio a solicitar -->
      <label>PRIORIDAD DEL CAMBIO</label>
      <div class="radio-group prioridad">
        <label
          ><input type="radio" name="pri_cam" value="Urgente" />Urgente</label
        >
        <label><input type="radio" name="pri_cam" value="Alta" />Alta</label>
        <label><input type="radio" name="pri_cam" value="Media" />Media</label>
        <label><input type="radio" name="pri_cam" value="Baja" />Baja</label>
      </div>

      <!-- Tipos de cambio posibles ahora como radio-group con distribución uniforme -->
      <div class="section-title">TIPO DE CAMBIO</div>
      <div class="radio-group tipo-cambio">
        <label
          ><input type="radio" name="tip_cam" value="Permisos" />Permisos o
          acceso</label
        >
        <label
          ><input type="radio" name="tip_cam" value="Gráfico" />Gráfico</label
        >
        <label
          ><input
            type="radio"
            name="tip_cam"
            value="Configuraciones"
          />Configuraciones</label
        >
        <label
          ><input type="radio" name="tip_cam" value="Seguridad" />Seguridad y
          privacidad</label
        >
        <label
          ><input type="radio" name="tip_cam" value="Técnicos" />Técnicos</label
        >
        <label><input type="radio" name="tip_cam" value="Otros" />Otros</label>
      </div>

      <!-- Origen del cambio solicitado -->
      <div class="section-title">ORIGEN DE LA SOLICITUD DE CAMBIO</div>
      <div class="radio-group center">
        <label><input type="radio" name="ori_cam" value="Fallas" />Fallas</label
        >
        <label
          ><input type="radio" name="ori_cam" value="Mejora" />Solicitud de
          mejora</label
        >
      </div>

      <!-- Adjuntar archivos o imágenes adicionales -->
      <div class="section-title">DOCUMENTOS O INFORMACIÓN ADICIONAL</div>
      <div class="upload-card" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event)">
        <p>Suba su documento</p>
        <input type="file" name="archivo" />
      </div>

      <!-- Botones de acción del formulario -->
      <div class="form-buttons">
        <a href="/">
          <button type="button" class="btn-secondary"> Regresar </button>
        </a>
        <button type="submit" class="btn-primary"> Enviar Solicitud </button>
      </div>
    </div>
  </form>
</Layout>
